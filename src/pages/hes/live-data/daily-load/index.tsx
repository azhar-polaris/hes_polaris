import { useSearchParams } from 'react-router-dom';
import { useState } from 'react';
import DailyLoadTable from './includes/dailyLoadTable';
import DailyLoadGraph from './includes/dailyLoadGraph';
const DailyLoad = () => {
  const [searchParams, setSearchParams] = useSearchParams();
  const [view, setView] = useState<string>('graph');
  const mapParams = (params: URLSearchParams) => {
    const mappedParams = new URLSearchParams();
    if (params.has('site_ids'))
      mappedParams.set('site_id', params.get('site_ids')!);
    if (params.has('pss_ids'))
      mappedParams.set('pss_id', params.get('pss_ids')!);
    if (params.has('feeder_ids'))
      mappedParams.set('feeder_id', params.get('feeder_ids')!);
    if (params.has('dtr_ids'))
      mappedParams.set('dtr_id', params.get('dtr_ids')!);
    return mappedParams;
  };
  const mappedSearchParams = mapParams(searchParams);

  return (
    <div
     
      className="px-5 py-3 w-full"
    >
      <div className="flex relative flex-col mt-8">
        <div className="flex justify-between items-center ">
          <h1 className="capitalize secondary-title lg:main-title">
            <span className="font-bold text-[#0A3690]">Daily Load</span>
          </h1>
          <div className='cursor-pointer'  onClick={() => {
        setView(view === 'graph' ? 'table' : 'graph');
      }}>
            {view === 'table' && (
              <svg
                width="168"
                height="75"
                viewBox="0 0 168 75"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g filter="url(#filter0_d_3548_6979)">
                  <rect
                    x="18"
                    y="8"
                    width="135"
                    height="40"
                    rx="5"
                    fill="url(#paint0_linear_3548_6979)"
                  />
                  <path
                    d="M42.6193 20H42.1506V27.5312H49.6818V27.0625C49.6818 23.1853 46.4966 20 42.6193 20Z"
                    fill="white"
                  />
                  <path
                    d="M36.122 34.2227C37.3593 35.3063 38.9742 36 40.7444 36C44.6216 36 47.7756 32.8147 47.7756 28.9375V28.4688H41.876L36.122 34.2227Z"
                    fill="white"
                  />
                  <path
                    d="M41.2131 21.9062H40.7444C39.2136 21.9062 37.7999 22.4034 36.6442 23.237L41.2131 27.8059V21.9062Z"
                    fill="white"
                  />
                  <path
                    d="M35.9186 23.8372C34.5638 25.1196 33.6818 26.9291 33.6818 28.9376C33.6818 30.7078 34.3756 32.3226 35.4591 33.5599L40.5502 28.4688L35.9186 23.8372Z"
                    fill="white"
                  />
                  <path
                    d="M63.2282 23.855C60.8882 23.855 59.4782 25.58 59.4782 28.145C59.4782 30.77 61.0082 32.285 63.2432 32.285C65.0882 32.285 66.5732 31.34 66.5732 29.15V28.835H62.9432V27.53H67.9532V33.515H66.7232L66.6182 32.045C66.0332 32.99 64.7132 33.68 63.1232 33.68C60.0482 33.68 57.9332 31.46 57.9332 28.115C57.9332 24.815 60.0632 22.475 63.2582 22.475C65.6282 22.475 67.4732 23.84 67.8332 25.925H66.2732C65.8682 24.545 64.6682 23.855 63.2282 23.855ZM74.0079 26.105V27.395H73.3779C72.0429 27.395 71.2179 28.205 71.2179 29.615V33.5H69.8079V26.18H71.1279L71.2179 27.29C71.5179 26.525 72.2529 26.015 73.2579 26.015C73.5129 26.015 73.7229 26.045 74.0079 26.105ZM77.1824 33.68C75.6074 33.68 74.6774 32.795 74.6774 31.46C74.6774 30.11 75.6824 29.27 77.4074 29.135L79.7174 28.955V28.745C79.7174 27.515 78.9824 27.08 77.9924 27.08C76.8074 27.08 76.1324 27.605 76.1324 28.49H74.9024C74.9024 26.96 76.1624 25.955 78.0524 25.955C79.8674 25.955 81.0974 26.915 81.0974 28.895V33.5H79.8974L79.7474 32.315C79.3724 33.155 78.3674 33.68 77.1824 33.68ZM77.5874 32.585C78.9224 32.585 79.7324 31.715 79.7324 30.335V29.945L77.8574 30.095C76.6124 30.215 76.1024 30.695 76.1024 31.415C76.1024 32.195 76.6724 32.585 77.5874 32.585ZM83.0501 36.785V26.165H84.3251L84.4301 27.485C84.9251 26.48 85.9151 25.955 87.0851 25.955C89.1851 25.955 90.4901 27.53 90.4901 29.78C90.4901 32.015 89.2601 33.695 87.0851 33.695C85.9151 33.695 84.9401 33.2 84.4601 32.3V36.785H83.0501ZM84.4751 29.84C84.4751 31.34 85.3451 32.42 86.7851 32.42C88.2251 32.42 89.0801 31.34 89.0801 29.84C89.0801 28.325 88.2251 27.245 86.7851 27.245C85.3451 27.245 84.4751 28.31 84.4751 29.84ZM93.4542 33.485H92.0442V22.46H93.4542V27.29C93.9192 26.495 94.8042 25.955 95.9442 25.955C97.8192 25.955 98.7192 27.14 98.7192 29.015V33.5H97.3092V29.33C97.3092 27.845 96.6042 27.245 95.5542 27.245C94.1892 27.245 93.4542 28.235 93.4542 29.495V33.485ZM108.029 33.5L103.904 22.655H105.479L108.119 29.585C108.359 30.2 108.569 30.815 108.794 31.625C109.049 30.77 109.304 30.05 109.484 29.57L112.109 22.655H113.639L109.559 33.5H108.029ZM115.498 24.425C114.988 24.425 114.568 24.005 114.568 23.495C114.568 22.97 114.988 22.565 115.498 22.565C116.008 22.565 116.428 22.97 116.428 23.495C116.428 24.005 116.008 24.425 115.498 24.425ZM114.808 33.5V26.165H116.218V33.5H114.808ZM121.43 33.68C119.27 33.68 117.785 32.12 117.785 29.84C117.785 27.545 119.24 25.955 121.37 25.955C123.455 25.955 124.82 27.395 124.82 29.57V30.095L119.15 30.11C119.255 31.655 120.065 32.51 121.46 32.51C122.555 32.51 123.275 32.06 123.515 31.22H124.835C124.475 32.795 123.245 33.68 121.43 33.68ZM121.37 27.14C120.14 27.14 119.36 27.875 119.18 29.165H123.41C123.41 27.95 122.615 27.14 121.37 27.14ZM127.721 33.5L125.321 26.165H126.776L127.991 29.975C128.156 30.515 128.306 31.07 128.441 31.715C128.561 31.07 128.756 30.455 128.921 29.975L130.151 26.165H131.591L132.806 29.975C132.926 30.335 133.166 31.19 133.286 31.715C133.406 31.13 133.541 30.62 133.751 29.975L134.981 26.165H136.451L133.946 33.5H132.611L131.336 29.57C131.096 28.835 130.946 28.265 130.871 27.86C130.796 28.22 130.661 28.7 130.391 29.585L129.116 33.5H127.721Z"
                    fill="white"
                  />
                </g>
                <defs>
                  <filter
                    id="filter0_d_3548_6979"
                    x="0.818165"
                    y="0.363628"
                    width="169.364"
                    height="74.3637"
                    filterUnits="userSpaceOnUse"
                    color-interpolation-filters="sRGB"
                  >
                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                    <feColorMatrix
                      in="SourceAlpha"
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                      result="hardAlpha"
                    />
                    <feMorphology
                      radius="11.4546"
                      operator="erode"
                      in="SourceAlpha"
                      result="effect1_dropShadow_3548_6979"
                    />
                    <feOffset dy="9.54546" />
                    <feGaussianBlur stdDeviation="14.3182" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix
                      type="matrix"
                      values="0 0 0 0 0.376471 0 0 0 0 0.680314 0 0 0 0 0.960784 0 0 0 0.3 0"
                    />
                    <feBlend
                      mode="normal"
                      in2="BackgroundImageFix"
                      result="effect1_dropShadow_3548_6979"
                    />
                    <feBlend
                      mode="normal"
                      in="SourceGraphic"
                      in2="effect1_dropShadow_3548_6979"
                      result="shape"
                    />
                  </filter>
                  <linearGradient
                    id="paint0_linear_3548_6979"
                    x1="18"
                    y1="8"
                    x2="39.7907"
                    y2="81.5435"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#2F80ED" />
                    <stop offset="1" stop-color="#56CCF2" />
                  </linearGradient>
                </defs>
              </svg>
            )}
            {view === 'graph' && (
              <svg
                width="153"
                height="75"
                viewBox="0 0 153 75"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g filter="url(#filter0_d_3548_6027)">
                  <rect
                    x="18"
                    y="8"
                    width="120"
                    height="40"
                    rx="5"
                    fill="url(#paint0_linear_3548_6027)"
                  />
                  <g clip-path="url(#clip0_3548_6027)">
                    <path
                      d="M49.713 20.9375H40.2755C40.0165 20.9375 39.8068 21.1471 39.8068 21.4062C39.8068 21.6653 40.0165 21.875 40.2755 21.875H49.713C49.972 21.875 50.1818 21.6653 50.1818 21.4062C50.1818 21.1471 49.972 20.9375 49.713 20.9375Z"
                      fill="white"
                    />
                    <path
                      d="M40.2755 23.75H44.9943C45.2533 23.75 45.463 23.5403 45.463 23.2812C45.463 23.0221 45.2533 22.8125 44.9943 22.8125H40.2755C40.0165 22.8125 39.8068 23.0221 39.8068 23.2812C39.8068 23.5403 40.0165 23.75 40.2755 23.75Z"
                      fill="white"
                    />
                    <path
                      d="M40.2755 29.4062H44.9943C45.2533 29.4062 45.463 29.1965 45.463 28.9375C45.463 28.6783 45.2533 28.4688 44.9943 28.4688H40.2755C40.0165 28.4688 39.8068 28.6783 39.8068 28.9375C39.8068 29.1965 40.0165 29.4062 40.2755 29.4062Z"
                      fill="white"
                    />
                    <path
                      d="M44.9943 35.0625C45.2533 35.0625 45.463 34.8528 45.463 34.5938C45.463 34.3346 45.2533 34.125 44.9943 34.125H40.2755C40.0165 34.125 39.8068 34.3346 39.8068 34.5938C39.8068 34.8528 40.0165 35.0625 40.2755 35.0625H44.9943Z"
                      fill="white"
                    />
                    <path
                      d="M49.713 26.5938H40.2755C40.0165 26.5938 39.8068 26.8033 39.8068 27.0625C39.8068 27.3215 40.0165 27.5312 40.2755 27.5312H49.713C49.972 27.5312 50.1818 27.3215 50.1818 27.0625C50.1818 26.8033 49.972 26.5938 49.713 26.5938Z"
                      fill="white"
                    />
                    <path
                      d="M49.713 32.25H40.2755C40.0165 32.25 39.8068 32.4596 39.8068 32.7188C39.8068 32.9778 40.0165 33.1875 40.2755 33.1875H49.713C49.972 33.1875 50.1818 32.9778 50.1818 32.7188C50.1818 32.4596 49.972 32.25 49.713 32.25Z"
                      fill="white"
                    />
                    <path
                      d="M38.6102 23.7006C38.769 23.6208 38.8693 23.4589 38.8693 23.2812V21.4062C38.8693 21.2286 38.769 21.0665 38.6102 20.9869L36.7352 20.0494C36.6033 19.9835 36.4478 19.9835 36.3158 20.0494L34.4408 20.9869C34.282 21.0665 34.1818 21.2286 34.1818 21.4062V23.2812C34.1818 23.4589 34.282 23.6208 34.4408 23.7006L36.0568 24.5085V25.8352L34.4408 26.6432C34.282 26.7228 34.1818 26.8849 34.1818 27.0625V28.9375C34.1818 29.1151 34.282 29.2771 34.4408 29.3568L36.0568 30.1648V31.4915L34.4408 32.2994C34.282 32.379 34.1818 32.5411 34.1818 32.7188V34.5938C34.1818 34.7714 34.282 34.9333 34.4408 35.0131L36.3158 35.9506C36.3817 35.9835 36.4536 36 36.5255 36C36.5974 36 36.6693 35.9835 36.7352 35.9506L38.6102 35.0131C38.769 34.9333 38.8693 34.7714 38.8693 34.5938V32.7188C38.8693 32.5411 38.769 32.379 38.6102 32.2994L36.9943 31.4915V30.1648L38.6102 29.3568C38.769 29.2771 38.8693 29.1151 38.8693 28.9375V27.0625C38.8693 26.8849 38.769 26.7228 38.6102 26.6432L36.9943 25.8352V24.5085L38.6102 23.7006ZM36.5247 34.125C36.2657 34.125 36.0559 33.9152 36.0559 33.6562C36.0559 33.3973 36.2657 33.1875 36.5247 33.1875C36.7836 33.1875 36.9934 33.3973 36.9934 33.6562C36.9934 33.9152 36.7836 34.125 36.5247 34.125ZM36.5247 28.4688C36.2657 28.4688 36.0559 28.2589 36.0559 28C36.0559 27.7411 36.2657 27.5312 36.5247 27.5312C36.7836 27.5312 36.9934 27.7411 36.9934 28C36.9934 28.2589 36.7836 28.4688 36.5247 28.4688ZM36.5247 22.8125C36.2657 22.8125 36.0559 22.6027 36.0559 22.3438C36.0559 22.0848 36.2657 21.875 36.5247 21.875C36.7836 21.875 36.9934 22.0848 36.9934 22.3438C36.9934 22.6027 36.7836 22.8125 36.5247 22.8125Z"
                      fill="white"
                    />
                  </g>
                  <path
                    d="M60.7302 22.432V32.544H65.8182V34H59.1622V22.432H60.7302ZM68.0016 24.32C67.4576 24.32 67.0096 23.872 67.0096 23.328C67.0096 22.768 67.4576 22.336 68.0016 22.336C68.5456 22.336 68.9936 22.768 68.9936 23.328C68.9936 23.872 68.5456 24.32 68.0016 24.32ZM67.2656 34V26.176H68.7696V34H67.2656ZM70.3131 31.728H71.7531C71.7531 32.528 72.3611 33.008 73.3531 33.008C74.4091 33.008 75.0171 32.576 75.0171 31.856C75.0171 31.328 74.7611 31.008 73.9451 30.8L72.5691 30.48C71.1771 30.144 70.5211 29.456 70.5211 28.304C70.5211 26.864 71.7371 25.952 73.4651 25.952C75.1771 25.952 76.2971 26.912 76.3291 28.4H74.8891C74.8571 27.616 74.3291 27.12 73.4171 27.12C72.4731 27.12 71.9451 27.536 71.9451 28.256C71.9451 28.784 72.3291 29.136 73.0971 29.328L74.4731 29.664C75.8011 29.984 76.4571 30.592 76.4571 31.76C76.4571 33.248 75.1771 34.192 73.3211 34.192C71.4811 34.192 70.3131 33.216 70.3131 31.728ZM80.333 34H78.829V27.44H77.293V26.176H78.829V23.728H80.333V26.176H81.869V27.44H80.333V34ZM91.0657 34L86.6657 22.432H88.3457L91.1617 29.824C91.4177 30.48 91.6417 31.136 91.8817 32C92.1537 31.088 92.4257 30.32 92.6177 29.808L95.4177 22.432H97.0497L92.6977 34H91.0657ZM99.0329 24.32C98.4889 24.32 98.0409 23.872 98.0409 23.328C98.0409 22.768 98.4889 22.336 99.0329 22.336C99.5769 22.336 100.025 22.768 100.025 23.328C100.025 23.872 99.5769 24.32 99.0329 24.32ZM98.2969 34V26.176H99.8009V34H98.2969ZM105.36 34.192C103.056 34.192 101.472 32.528 101.472 30.096C101.472 27.648 103.024 25.952 105.296 25.952C107.52 25.952 108.976 27.488 108.976 29.808V30.368L102.928 30.384C103.04 32.032 103.904 32.944 105.392 32.944C106.56 32.944 107.328 32.464 107.584 31.568H108.992C108.608 33.248 107.296 34.192 105.36 34.192ZM105.296 27.216C103.984 27.216 103.152 28 102.96 29.376H107.472C107.472 28.08 106.624 27.216 105.296 27.216ZM112.071 34L109.511 26.176H111.063L112.359 30.24C112.535 30.816 112.695 31.408 112.839 32.096C112.967 31.408 113.175 30.752 113.351 30.24L114.663 26.176H116.199L117.495 30.24C117.623 30.624 117.879 31.536 118.007 32.096C118.135 31.472 118.279 30.928 118.503 30.24L119.815 26.176H121.383L118.711 34H117.287L115.927 29.808C115.671 29.024 115.511 28.416 115.431 27.984C115.351 28.368 115.207 28.88 114.919 29.824L113.559 34H112.071Z"
                    fill="white"
                  />
                </g>
                <defs>
                  <filter
                    id="filter0_d_3548_6027"
                    x="0.818165"
                    y="0.363628"
                    width="154.364"
                    height="74.3637"
                    filterUnits="userSpaceOnUse"
                    color-interpolation-filters="sRGB"
                  >
                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                    <feColorMatrix
                      in="SourceAlpha"
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                      result="hardAlpha"
                    />
                    <feMorphology
                      radius="11.4546"
                      operator="erode"
                      in="SourceAlpha"
                      result="effect1_dropShadow_3548_6027"
                    />
                    <feOffset dy="9.54546" />
                    <feGaussianBlur stdDeviation="14.3182" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix
                      type="matrix"
                      values="0 0 0 0 0.376471 0 0 0 0 0.680314 0 0 0 0 0.960784 0 0 0 0.3 0"
                    />
                    <feBlend
                      mode="normal"
                      in2="BackgroundImageFix"
                      result="effect1_dropShadow_3548_6027"
                    />
                    <feBlend
                      mode="normal"
                      in="SourceGraphic"
                      in2="effect1_dropShadow_3548_6027"
                      result="shape"
                    />
                  </filter>
                  <linearGradient
                    id="paint0_linear_3548_6027"
                    x1="18"
                    y1="8"
                    x2="42"
                    y2="80"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stop-color="#2F80ED" />
                    <stop offset="1" stop-color="#56CCF2" />
                  </linearGradient>
                  <clipPath id="clip0_3548_6027">
                    <rect
                      width="16"
                      height="16"
                      fill="white"
                      transform="translate(34.1818 20)"
                    />
                  </clipPath>
                </defs>
              </svg>
            )}
          </div>
        </div>
        <div className="overflow-x-scroll">
          {view === 'table' && (
            <DailyLoadTable
              groupName={'Block Load'}
              search={mappedSearchParams.toString()}
            />
          )}
          {view === 'graph' && <DailyLoadGraph />}
        </div>
      </div>
    </div>
  );
};

export default DailyLoad;
